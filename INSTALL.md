# Mem0 Dify Plugin v0.1.7 - å®‰è£…æŒ‡å—

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 1. å®‰è£…æ’ä»¶

æŒ‰ç…§ Dify å®˜æ–¹æ’ä»¶å®‰è£…æŒ‡å—è¿›è¡Œå®‰è£…ï¼š

1. **ç™»å½• Dify**
   - è®¿é—®ä½ çš„ Dify å®ä¾‹ï¼ˆè‡ªå»ºæˆ– Dify äº‘ï¼‰
   - ä¾‹å¦‚ï¼š`https://your-dify-instance.com` æˆ– `https://cloud.dify.ai`

2. **è¿›å…¥æ’ä»¶ç®¡ç†**
   - å¯¼èˆªåˆ° **Settings** â†’ **Plugins**
   - æˆ–ç›´æ¥è®¿é—® `/plugins` è·¯å¾„

3. **å®‰è£…æ’ä»¶**
   - ç‚¹å‡» **"Install from GitHub"** æˆ– **"ä¸Šä¼ æ’ä»¶"** æŒ‰é’®
   - å¦‚æœä» GitHub å®‰è£…ï¼šè¾“å…¥ä»“åº“ URL
   - å¦‚æœä»åŒ…å®‰è£…ï¼šé€‰æ‹© `mem0ai-0.1.7.difypkg` æ–‡ä»¶
   - ç­‰å¾…ä¸Šä¼ å’Œå®‰è£…å®Œæˆ

### 2. é…ç½®æ’ä»¶

å®‰è£…å®Œæˆåï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤é…ç½®æ’ä»¶ï¼š

#### æ­¥éª¤ 1ï¼šé€‰æ‹©è¿è¡Œæ¨¡å¼

é¦–å…ˆé€‰æ‹©æ’ä»¶çš„è¿è¡Œæ¨¡å¼ï¼š

- **å¼‚æ­¥æ¨¡å¼**ï¼ˆæ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰
  - è®¾ç½® `async_mode` ä¸º `true`ï¼ˆé»˜è®¤å€¼ï¼‰
  - æ”¯æŒé«˜å¹¶å‘
  - å†™æ“ä½œï¼ˆAdd/Update/Deleteï¼‰éé˜»å¡ï¼Œç«‹å³è¿”å›
  - è¯»æ“ä½œï¼ˆSearch/Getï¼‰ç­‰å¾…ç»“æœï¼Œå…·æœ‰è¶…æ—¶ä¿æŠ¤
  - é€‚åˆç”Ÿäº§ç¯å¢ƒçš„é«˜æµé‡åœºæ™¯

- **åŒæ­¥æ¨¡å¼**ï¼ˆæ¨èç”¨äºæµ‹è¯•ç¯å¢ƒï¼‰
  - è®¾ç½® `async_mode` ä¸º `false`
  - æ‰€æœ‰æ“ä½œé˜»å¡ç›´åˆ°å®Œæˆ
  - å¯ä»¥ç«‹å³çœ‹åˆ°æ¯æ¬¡è®°å¿†æ“ä½œçš„å®é™…è¿”å›ç»“æœ
  - é€‚åˆæµ‹è¯•å’Œè°ƒè¯•
  - **æ³¨æ„**ï¼šåŒæ­¥æ¨¡å¼æ²¡æœ‰è¶…æ—¶ä¿æŠ¤ã€‚å¦‚æœéœ€è¦è¶…æ—¶ä¿æŠ¤ï¼Œè¯·ä½¿ç”¨ `async_mode=true`

#### æ­¥éª¤ 2ï¼šé…ç½®æ¨¡å‹å’Œæ•°æ®åº“

åœ¨æ’ä»¶è®¾ç½®ä¸­é…ç½®ä»¥ä¸‹ JSON å—ã€‚è¯¦ç»†çš„é…ç½®é€‰é¡¹å’Œæ”¯æŒçš„æä¾›è€…ï¼Œè¯·å‚è€ƒ [Mem0 å®˜æ–¹é…ç½®æ–‡æ¡£](https://docs.mem0.ai/open-source/configuration)ã€‚

**å¿…å¡«é¡¹ï¼š**
- `local_llm_json` - LLM æä¾›è€…é…ç½®
- `local_embedder_json` - åµŒå…¥æ¨¡å‹é…ç½®
- `local_vector_db_json` - å‘é‡æ•°æ®åº“é…ç½®

**å¯é€‰é¡¹ï¼š**
- `local_graph_db_json` - å›¾æ•°æ®åº“é…ç½®ï¼ˆå¦‚ Neo4jï¼‰
- `local_reranker_json` - é‡æ’åºå™¨é…ç½®

---

## ğŸ”§ é…ç½®ç¤ºä¾‹

> **ğŸ“š å‚è€ƒæ–‡æ¡£**ï¼šè¯¦ç»†çš„é…ç½®é€‰é¡¹å’Œæ”¯æŒçš„æä¾›è€…ï¼Œè¯·å‚è€ƒ [Mem0 å®˜æ–¹é…ç½®æ–‡æ¡£](https://docs.mem0.ai/open-source/configuration)ã€‚

### LLM é…ç½® (`local_llm_json`)

```json
{
  "provider": "azure_openai",
  "config": {
    "model": "your-deployment-name",
    "temperature": 0.1,
    "max_tokens": 256,
    "azure_kwargs": {
      "azure_deployment": "your-deployment-name",
      "api_version": "version-to-use",
      "azure_endpoint": "your-api-base-url",
      "api_key": "your-api-key",
      "default_headers": {
        "CustomHeader": "your-custom-header"
      }
    }
  }
}
```

### Embedder é…ç½® (`local_embedder_json`)

```json
{
  "provider": "azure_openai",
  "config": {
    "model": "your-deployment-name",
    "azure_kwargs": {
      "api_version": "version-to-use",
      "azure_deployment": "your-deployment-name",
      "azure_endpoint": "your-api-base-url",
      "api_key": "your-api-key",
      "default_headers": {
        "CustomHeader": "your-custom-header"
      }
    }
  }
}
```

### Vector Store é…ç½® (`local_vector_db_json`)

```json
{
  "provider": "pgvector",
  "config": {
    "dbname": "your-vector-db-name",
    "user": "your-vector-db-user",
    "password": "your-vector-db-password",
    "host": "your-vector-db-host",
    "port": "your-vector-db-port",
    "sslmode": "require or disable"
  }
}
```

### Graph Store é…ç½® (`local_graph_db_json`) - å¯é€‰

```json
{
  "provider": "neo4j",
  "config": {
    "url": "neo4j+s://<HOST>",
    "username": "your-graph-db-user",
    "password": "your-graph-db-password"
  }
}
```

### Reranker é…ç½® (`local_reranker_json`) - å¯é€‰

```json
{
  "provider": "cohere",
  "config": {
    "model": "your-model-name",
    "api_key": "your-cohere-api-key",
    "top_k": 5
  }
}
```

---

## âœ… éªŒè¯å®‰è£…

é…ç½®å®Œæˆåï¼Œä½ åº”è¯¥èƒ½åœ¨ Dify å·¥ä½œæµä¸­ä½¿ç”¨ä»¥ä¸‹ 8 ä¸ªå·¥å…·ï¼š

### æ ¸å¿ƒåŠŸèƒ½å·¥å…·
1. âœ… **Add Memory** - æ™ºèƒ½ç®¡ç†è®°å¿†ï¼ˆæ·»åŠ /æ›´æ–°/åˆ é™¤ï¼‰
2. âœ… **Search Memory** - æœç´¢è®°å¿†ï¼ˆæ”¯æŒè¿‡æ»¤å™¨å’Œ top_kï¼‰
3. âœ… **Get All Memories** - è·å–æ‰€æœ‰è®°å¿†
4. âœ… **Get Memory** - è·å–å•æ¡è®°å¿†è¯¦æƒ…
5. âœ… **Update Memory** - æ›´æ–°è®°å¿†
6. âœ… **Delete Memory** - åˆ é™¤å•æ¡è®°å¿†
7. âœ… **Delete All Memories** - æ‰¹é‡åˆ é™¤è®°å¿†
8. âœ… **Get Memory History** - æŸ¥çœ‹è®°å¿†å†å²

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### æµ‹è¯• 1ï¼šæ·»åŠ è®°å¿†
```json
{
  "user": "I love Italian food",
  "assistant": "Great! I'll remember that.",
  "user_id": "test_user_001",
  "metadata": "{\"category\": \"food_preferences\"}"
}
```

### æµ‹è¯• 2ï¼šæœç´¢è®°å¿†
```json
{
  "query": "What food does the user like?",
  "user_id": "test_user_001",
  "top_k": 5
}
```

### æµ‹è¯• 3ï¼šä½¿ç”¨è¿‡æ»¤å™¨
```json
{
  "query": "user preferences",
  "filters": "{\"AND\": [{\"user_id\": \"test_user_001\"}]}"
}
```

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šä¸Šä¼ å¤±è´¥
**åŸå› **ï¼šæ–‡ä»¶æŸåæˆ–æ ¼å¼ä¸æ­£ç¡®
**è§£å†³**ï¼š
```bash
# é‡æ–°ç”Ÿæˆæ’ä»¶åŒ…
cd <your-plugin-directory>
./build_package.sh
```

### é—®é¢˜ 2ï¼šå·¥å…·æ— æ³•ä½¿ç”¨
**åŸå› **ï¼šé…ç½®ç¼ºå¤±æˆ–æ— æ•ˆ
**è§£å†³**ï¼š
1. ç¡®è®¤å·²é€‰æ‹©è¿è¡Œæ¨¡å¼ï¼ˆ`async_mode`ï¼‰
2. ç¡®è®¤å·²å¡«å†™å¿…å¡«é¡¹ï¼š`local_llm_json`ã€`local_embedder_json`ã€`local_vector_db_json`
3. æ£€æŸ¥ JSON ç»“æ„æ˜¯å¦ä¸º `{ "provider": ..., "config": { ... } }`
4. éªŒè¯æ‰€æœ‰ API keys å’Œæ•°æ®åº“è¿æ¥ä¿¡æ¯æ˜¯å¦æ­£ç¡®

### é—®é¢˜ 3ï¼šè¿‡æ»¤å™¨ JSON æŠ¥é”™
**åŸå› **ï¼šJSON æ ¼å¼é”™è¯¯
**è§£å†³**ï¼š
- ç¡®ä¿ `filters` å‚æ•°æ˜¯æœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²
- ä½¿ç”¨åœ¨çº¿ JSON éªŒè¯å™¨æ£€æŸ¥æ ¼å¼
- å‚è€ƒ CHANGELOG.md ä¸­çš„ç¤ºä¾‹

### é—®é¢˜ 4ï¼šHTTP è¶…æ—¶
**åŸå› **ï¼šæ•°æ®åº“/å›¾æ•°æ®åº“è¿æ¥é—®é¢˜
**è§£å†³**ï¼š
- æ£€æŸ¥å‘é‡åº“ï¼ˆå¦‚ pgvector/pineconeï¼‰æˆ–å›¾æ•°æ®åº“ï¼ˆNeo4jï¼‰è¿æ¥é…ç½®
- ç¡®è®¤å‡­è¯ã€åœ°å€ä¸ç«¯å£æ­£ç¡®

---

## ğŸ“š æ›´å¤šèµ„æº

- **æ’ä»¶æ›´æ–°æ—¥å¿—**: æŸ¥çœ‹ `CHANGELOG.md`
- **Mem0 å®˜æ–¹æ–‡æ¡£**: https://docs.mem0.ai
- **Dify æ’ä»¶æ–‡æ¡£**: https://docs.dify.ai/docs/plugins
- **é—®é¢˜åé¦ˆ**: è”ç³»æ’ä»¶å¼€å‘è€…

---

## ğŸ”„ æ›´æ–°æ’ä»¶

### ä»æ—§ç‰ˆæœ¬å‡çº§
å¦‚æœä½ å·²ç»å®‰è£…äº†æ—§ç‰ˆï¼š

1. **å¤‡ä»½æ•°æ®**ï¼ˆå¯é€‰ï¼‰
   - å¯¼å‡ºç°æœ‰çš„è®°å¿†æ•°æ®
   - è®°å½•å½“å‰é…ç½®

2. **å¸è½½æ—§ç‰ˆæœ¬**
   - åœ¨ Dify æ’ä»¶ç®¡ç†ä¸­å¸è½½æ—§ç‰ˆæœ¬
   - æˆ–ä½¿ç”¨ CLIï¼š`dify plugin uninstall mem0ai`

3. **å®‰è£…æ–°ç‰ˆæœ¬**
   - æŒ‰ç…§ä¸Šè¿°æ­¥éª¤å®‰è£… v0.1.7
   - é‡æ–°é…ç½®è¿è¡Œæ¨¡å¼å’Œæ‰€æœ‰ JSON å‡­è¯

4. **éªŒè¯åŠŸèƒ½**
   - æµ‹è¯• 8 ä¸ªå·¥å…·
   - éªŒè¯è¿‡æ»¤å™¨ä¸ `top_k`
   - æ ¹æ®é€‰æ‹©çš„æ¨¡å¼éªŒè¯æ“ä½œè¡Œä¸º

### è¿è¡Œæ¨¡å¼è¯´æ˜

- **å¼‚æ­¥æ¨¡å¼** (`async_mode=true`ï¼Œé»˜è®¤)ï¼š
  - å†™æ“ä½œï¼ˆAdd/Update/Delete/Delete_Allï¼‰ï¼šéé˜»å¡ï¼Œç«‹å³è¿”å› ACCEPT çŠ¶æ€
  - è¯»æ“ä½œï¼ˆSearch/Get/Get_All/Historyï¼‰ï¼šç­‰å¾…ç»“æœï¼Œå…·æœ‰è¶…æ—¶ä¿æŠ¤ï¼ˆé»˜è®¤ 30 ç§’ï¼‰
  - é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œæ”¯æŒé«˜å¹¶å‘

- **åŒæ­¥æ¨¡å¼** (`async_mode=false`)ï¼š
  - æ‰€æœ‰æ“ä½œé˜»å¡ç›´åˆ°å®Œæˆ
  - å¯ä»¥ç«‹å³çœ‹åˆ°æ¯æ¬¡æ“ä½œçš„å®é™…è¿”å›ç»“æœ
  - é€‚åˆæµ‹è¯•å’Œè°ƒè¯•
  - **æ³¨æ„**ï¼šåŒæ­¥æ¨¡å¼æ²¡æœ‰è¶…æ—¶ä¿æŠ¤ã€‚å¦‚æœéœ€è¦è¶…æ—¶ä¿æŠ¤ï¼Œè¯·ä½¿ç”¨ `async_mode=true`

---

## ğŸ‰ å¼€å§‹ä½¿ç”¨

å®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥ï¼š

1. **åœ¨ Workflow ä¸­ä½¿ç”¨**
   - æ‹–æ‹½ Mem0 å·¥å…·åˆ°å·¥ä½œæµ
   - é…ç½®å‚æ•°
   - è¿æ¥å…¶ä»–èŠ‚ç‚¹

2. **åœ¨ Agent ä¸­ä½¿ç”¨**
   - ä¸º Agent æ·»åŠ  Mem0 å·¥å…·
   - Agent å°†è‡ªåŠ¨ä½¿ç”¨è®°å¿†åŠŸèƒ½
   - æ”¯æŒé•¿æœŸè®°å¿†å’Œä¸Šä¸‹æ–‡

3. **é€šè¿‡ API è°ƒç”¨**
   - ä½¿ç”¨ Dify API è°ƒç”¨ Mem0 å·¥å…·
   - é›†æˆåˆ°ä½ çš„åº”ç”¨ä¸­
   - å®ç°è‡ªå®šä¹‰è®°å¿†é€»è¾‘

---

## âš ï¸ é‡è¦æç¤º

1. **API Key å®‰å…¨**
   - ä¸è¦åœ¨å…¬å…±åœºåˆåˆ†äº« API Key
   - å®šæœŸæ›´æ¢ API Key
   - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯

2. **è®°å¿†ç®¡ç†**
   - å®šæœŸæ¸…ç†ä¸éœ€è¦çš„è®°å¿†
   - ä½¿ç”¨ metadata ç»„ç»‡è®°å¿†
   - æ³¨æ„è®°å¿†å­˜å‚¨é…é¢

3. **æ€§èƒ½ä¼˜åŒ–**
   - ä½¿ç”¨ `top_k/limit` æ§åˆ¶è¿”å›æ•°é‡ï¼ˆé»˜è®¤ 5ï¼‰
   - åˆç†ä½¿ç”¨è¿‡æ»¤å™¨å‡å°‘æŸ¥è¯¢èŒƒå›´
   - pgvector è¿æ¥æ± è‡ªåŠ¨é…ç½®ï¼šæœ€å°è¿æ¥æ•° 10ï¼Œæœ€å¤§è¿æ¥æ•° 40ï¼Œæ”¯æŒé«˜å¹¶å‘åœºæ™¯

4. **å¯é…ç½®è¶…æ—¶ï¼ˆv0.1.2+ï¼‰**
   - æ‰€æœ‰è¯»æ“ä½œï¼ˆSearch/Get/Get_All/Historyï¼‰æ”¯æŒç”¨æˆ·å¯é…ç½®çš„è¶…æ—¶å€¼
   - è¶…æ—¶å‚æ•°åœ¨ Dify æ’ä»¶é…ç½®ç•Œé¢ä¸­ä½œä¸ºæ‰‹åŠ¨è¾“å…¥å­—æ®µæä¾›
   - å¦‚æœæœªæŒ‡å®šï¼Œå·¥å…·ä½¿ç”¨é»˜è®¤å€¼ï¼ˆ30 ç§’ï¼‰
   - æ— æ•ˆçš„è¶…æ—¶å€¼ä¼šè¢«æ•è·å¹¶è®°å½•è­¦å‘Šï¼Œå›é€€åˆ°é»˜è®¤å€¼

---

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼** ğŸš€

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ CHANGELOG.md æˆ–è”ç³»æ”¯æŒå›¢é˜Ÿã€‚
